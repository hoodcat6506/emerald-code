const JP_CHAR_TABLE = [
  ["　","あ","い","う","え","お","か","き","く","け","こ","さ","し","す","せ","そ"],
  ["た","ち","つ","て","と","な","に","ぬ","ね","の","は","ひ","ふ","へ","ほ","ま"],
  ["み","む","め","も","や","ゆ","よ","ら","り","る","れ","ろ","わ","を","ん","ぁ"],
  ["ぃ","ぅ","ぇ","ぉ","ゃ","ゅ","ょ","が","ぎ","ぐ","げ","ご","ざ","じ","ず","ぜ"],
  ["ぞ","だ","ぢ","づ","で","ど","ば","び","ぶ","べ","ぼ","ぱ","ぴ","ぷ","ぺ","ぽ"],
  ["っ","ア","イ","ウ","エ","オ","カ","キ","ク","ケ","コ","サ","シ","ス","セ","ソ"],
  ["タ","チ","ツ","テ","ト","ナ","ニ","ヌ","ネ","ノ","ハ","ヒ","フ","ヘ(가)","ホ","マ"],
  ["ミ","ム","メ","モ","ヤ","ユ","ヨ","ラ","リ","ル","レ","ロ","ワ","ヲ","ン","ァ"],
  ["ィ","ゥ","ェ","ォ","ャ","ュ","ョ","ガ","ギ","グ","ゲ","ゴ","ザ","ジ","ズ","ゼ"],
  ["ゾ","ダ","ヂ","ヅ","デ","ド","バ","ビ","ブ","ベ(가)","ボ","パ","ピ","プ","ペ(가)","ポ"],
  ["ッ","0","1","2","3","4","5","6","7","8","9","！","？","。","ー","・"],
  ["・・","『","』","「","」","♂","♀","円",".","×","/","A","B","C","D","E"],
  ["F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U"],
  ["V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k"],
  ["ｌ","m","n","o","p","q","r","s","t","u","v","w","x","y","z","▶"],
  [":","Ä","Ö","Ü","ä","ö","ü","⬆","⬇","⬅","Control characters"]
];

const ITEM_LIST = {
  '0000':	'없음',
  '0001':	'마스터볼',
  '0002':	'하이퍼볼',
  '0003':	'수퍼볼',
  '0004':	'몬스터볼',
  '0005':	'사파리볼',
  '0006':	'네트볼',
  '0007':	'다이브볼',
  '0008':	'네스트볼',
  '0009':	'리피트볼',
  '000A':	'타이머볼',
  '000B':	'럭셔리볼',
  '000C':	'프레미어볼',
  '000D':	'상처약',
  '000E':	'해독제',
  '000F':	'화상치료제',
  '0010':	'얼음상태치료제',
  '0011':	'잠깨는약',
  '0012':	'마비치료제',
  '0013':	'회복약',
  '0014':	'풀회복약',
  '0015':	'고급상처약',
  '0016':	'좋은상처약',
  '0017':	'만병통치약',
  '0018':	'기력의조각',
  '0019':	'기력의덩어리',
  '001A':	'맛있는물',
  '001B':	'미네랄사이다',
  '001C':	'후르츠밀크',
  '001D':	'튼튼밀크',
  '001E':	'힘의가루',
  '001F':	'힘의뿌리',
  '0020':	'만능가루',
  '0021':	'부활초',
  '0022':	'PP에이드 ',
  '0023':	'PP회복',
  '0024':	'PP에이더',
  '0025':	'PP맥스',
  '0026':	'용암전병',
  '0027':	'파랑비드로',
  '0028':	'노랑비드로',
  '0029':	'빨강비드로',
  '002A':	'검정비드로',
  '002B':	'하양비드로',
  '002C':	'나무열매쥬스',
  '002D':	'성스러운분말',
  '002E':	'여울소금',
  '002F':	'여울조개껍질 ',
  '0030':	'빨강조각',
  '0031':	'파랑조각',
  '0032':	'노랑조각',
  '0033':	'초록조각',
  '003F':	'맥스업',
  '0040':	'타우린',
  '0041':	'사포닌 ',
  '0042':	'알칼로이드',
  '0043':	'리보플라빈',
  '0044':	'이상한사탕',
  '0045':	'포인트업',
  '0046':	'키토산',
  '0047':	'포인트맥스',
  '0049':	'이펙트가드',
  '004A':	'크리티컬커터',
  '004B':	'플러스파워',
  '004C':	'디펜드업',
  '004D':	'스피드업',
  '004E':	'잘-맞히기',
  '004F':	'스페셜업',
  '0050':	'삐삐인형',
  '0051':	'에나비꼬리',
  '0053':	'실버스프레이',
  '0054':	'골드스프레이',
  '0055':	'동굴탈출로프',
  '0056':	'벌레회피스프레이',
  '005D':	'태양의돌',
  '005E':	'달의돌',
  '005F':	'불꽃의돌',
  '0060':	'천둥의돌',
  '0061':	'물의돌',
  '0062':	'리프의돌',
  '0067':	'작은버섯',
  '0068':	'큰버섯',
  '006A':	'진주',
  '006B':	'큰진주',
  '006C':	'별의모래',
  '006D':	'별의조각',
  '006E':	'금구슬',
  '006F':	'하트비늘',
  '0079':	'오렌지메일',
  '007A':	'항구메일',
  '007B':	'반짝반짝메일',
  '007C':	'메카니컬메일',
  '007D':	'나무메일',
  '007E':	'파도메일',
  '007F':	'보배메일',
  '0080':	'그림자메일',
  '0081':	'열대메일',
  '0082':	'꿈의메일',
  '0083':	'미라클메일',
  '0084':	'복고풍메일',
  '0085':	'버치열매',
  '0086':	'유루열매',
  '0087':	'복슝열매',
  '0088':	'복분열매',
  '0089':	'배리열매',
  '008A':	'과사열매',
  '008B':	'오랭열매',
  '008C':	'시몬열매',
  '008D':	'리샘열매',
  '008E':	'자뭉열매',
  '008F':	'무화열매',
  '0090':	'위키열매',
  '0091':	'마고열매',
  '0092':	'아바열매',
  '0093':	'파야열매',
  '0094':	'라즈열매',
  '0095':	'블리열매',
  '0096':	'나나열매',
  '0097':	'서배열매',
  '0098':	'파인열매',
  '0099':	'유석열매',
  '009A':	'시마열매',
  '009B':	'파비열매',
  '009C':	'로매열매',
  '009D':	'또뽀열매',
  '009E':	'토망열매',
  '009F':	'수숙열매',
  '00A0':	'고스티열매',
  '00A1':	'라부탐열매',
  '00A2':	'노멜열매',
  '00A3':	'메호키열매',
  '00A4':	'자야열매',
  '00A5':	'슈박열매',
  '00A6':	'두리열매',
  '00A7':	'루베열매',
  '00A8':	'치리열매',
  '00A9':	'용아열매',
  '00AA':	'캄라열매',
  '00AB':	'야타비열매',
  '00AC':	'규살열매',
  '00AD':	'랑사열매',
  '00AE':	'스타열매',
  '00AF':	'의문열매',
  '00B3':	'반짝가루',
  '00B4':	'하양허브',
  '00B5':	'교정깁스',
  '00B6':	'학습장치',
  '00B7':	'선제공격손톱',
  '00B8':	'평온의방울',
  '00B9':	'멘탈허브',
  '00BA':	'구애머리띠',
  '00BB':	'왕의징표석',
  '00BC':	'은빛가루',
  '00BD':	'부적금화',
  '00BE':	'순결의부적',
  '00BF':	'마음의물방울',
  '00C0':	'심해의이빨',
  '00C1':	'심해의비늘',
  '00C2':	'연막탄',
  '00C3':	'변함없는돌',
  '00C4':	'기합의머리띠',
  '00C5':	'행복의알',
  '00C6':	'초점렌즈',
  '00C7':	'금속코트',
  '00C8':	'먹다남은음식',
  '00C9':	'용의비늘',
  '00CA':	'전기구슬',
  '00CB':	'부드러운모래',
  '00CC':	'딱딱한돌',
  '00CD':	'기적의씨',
  '00CE':	'검은안경',
  '00CF':	'검은띠',
  '00D0':	'자석',
  '00D1':	'신비의물방울',
  '00D2':	'예리한부리',
  '00D3':	'독바늘',
  '00D4':	'녹지않는얼음',
  '00D5':	'저주의부적',
  '00D6':	'휘어진스푼',
  '00D7':	'목탄',
  '00D8':	'용의이빨',
  '00D9':	'실크스카프',
  '00DA':	'업그레이드',
  '00DB':	'조개껍질방울',
  '00DC':	'바닷물향로',
  '00DD':	'무사태평향로',
  '00DE':	'럭키펀치',
  '00DF':	'금속파우더',
  '00E0':	'굵은뼈',
  '00E1':	'대파',
  '00FE':	'빨강밴드',
  '00FF':	'파랑밴드',
  '0100':	'분홍밴드',
  '0101':	'초록밴드',
  '0102':	'노랑밴드',
  '0103':	'마하자전거',
  '0104':	'동전케이스',
  '0105':	'다우징머신',
  '0106':	'낡은낚싯대',
  '0107':	'좋은낚싯대',
  '0108':	'대단한낚싯대',
  '0109':	'승선티켓',
  '010A':	'콘테스트패스',
  '010C':	'고래왕자물뿌리개',
  '010D':	'데봉화물',
  '010E':	'검댕자루',
  '010F':	'지하의열쇠',
  '0110':	'더트자전거',
  '0111':	'포록케이스',
  '0112':	'성호에게줄편지',
  '0113':	'무한티켓',
  '0114':	'주홍구슬',
  '0115':	'쪽빛구슬',
  '0116':	'탐지기',
  '0117':	'고고고글',
  '0118':	'운석',
  '0119':	'1호실열쇠',
  '011A':	'2호실열쇠',
  '011B':	'4호실열쇠',
  '011C':	'6호실열쇠',
  '011D':	'창고열쇠',
  '011E':	'뿌리화석',
  '011F':	'발톱화석',
  '0120':	'데봉스코프',
  '0121':	'기술머신01 힘껏펀치',
  '0122':	'기술머신02 드래곤크루',
  '0123':	'기술머신03 물의파동',
  '0124':	'기술머신04 명상',
  '0125':	'기술머신05 울부짖기',
  '0126':	'기술머신06 맹독',
  '0127':	'기술머신07 싸라기눈',
  '0128':	'기술머신08 벌크업',
  '0129':	'기술머신09 기관총',
  '012A':	'기술머신10 잠재파워',
  '012B':	'기술머신11 쾌청',
  '012C':	'기술머신12 도발',
  '012D':	'기술머신13 냉동빔',
  '012E':	'기술머신14 눈보라',
  '012F':	'기술머신15 파괴광선',
  '0130':	'기술머신16 빛의장막',
  '0131':	'기술머신17 방어',
  '0132':	'기술머신18 비바라기',
  '0133':	'기술머신19 기가드레인',
  '0134':	'기술머신20 신비의부적',
  '0135':	'기술머신21 화풀이',
  '0136':	'기술머신22 솔라빔',
  '0137':	'기술머신23 아이언테일',
  '0138':	'기술머신24 10만볼트',
  '0139':	'기술머신25 번개',
  '013A':	'기술머신26 지진',
  '013B':	'기술머신27 은혜갚기',
  '013C':	'기술머신28 구멍파기',
  '013D':	'기술머신29 사이코키네시스',
  '013E':	'기술머신30 섀도볼',
  '013F':	'기술머신31 깨트리다',
  '0140':	'기술머신32 그림자분신',
  '0141':	'기술머신33 리플렉터',
  '0142':	'기술머신34 전격파',
  '0143':	'기술머신35 화염방사',
  '0144':	'기술머신36 오물폭탄',
  '0145':	'기술머신37 모래바람',
  '0146':	'기술머신38 불대문자',
  '0147':	'기술머신39 암석봉인',
  '0148':	'기술머신40 제비반환',
  '0149':	'기술머신41 트집',
  '014A':	'기술머신42 객기',
  '014B':	'기술머신43 비밀의힘',
  '014C':	'기술머신44 잠자기',
  '014D':	'기술머신45 헤롱헤롱',
  '014E':	'기술머신46 도둑질',
  '014F':	'기술머신47 강철날개',
  '0150':	'기술머신48 스킬스웹',
  '0151':	'기술머신49 가로챔',
  '0152':	'기술머신50 오버히트',
  '0153':	'비전머신01 풀베기',
  '0154':	'비전머신02 공중날기',
  '0155':	'비전머신03 파도타기',
  '0156':	'비전머신04 괴력',
  '0157':	'비전머신05 플래시',
  '0158':	'비전머신06 바위깨기',
  '0159':	'비전머신07 폭포오르기',
  '015A':	'비전머신08 다이빙',
  '015D':	'전해줄물건',
  '015E':	'포켓몬피리',
  '015F':	'비밀의열쇠',
  '0160':	'교환권',
  '0161':	'금틀니',
  '0162':	'비밀의호박',
  '0163':	'카드키',
  '0164':	'엘리베이터키',
  '0165':	'조개화석',
  '0166':	'껍질화석',
  '0167':	'실프스코프',
  '0168':	'자전거',
  '0169':	'타운맵',
  '016A':	'배틀서처',
  '016B':	'보이스체커',
  '016C':	'기술머신케이스',
  '016D':	'열매주머니',
  '016E':	'가르침TV',
  '016F':	'트라이패스',
  '0170':	'레인보우패스',
  '0171':	'차',
  '0172':	'신비의티켓',
  '0173':	'오로라티켓',
  '0174':	'가루상자',
  '0175':	'루비',
  '0176':	'사파이어',
  '0177':	'마그마의증표',
  '0178':	'오래된해도',
};

function hex2CharCode(numString, digit = 16) {
  if (typeof numString === 'number') {
    numString = numString.toString(16);
  } else if (/^[0-9]+$/i.test(numString) && digit === 10) {
    numString = (+numString).toString(16);
  } else if (numString.startsWith('0x') || numString.startsWith('0X')) {
    numString = numString.slice(2);
  }

  if (/^[0-9a-fA-F]+$/i.test(numString) === false) {
    return {
      upper: null,
      lower: null,
    };
  }

  if (numString.length % 2 === 1) {
    numString = `0${numString}`;
  }

  const posList = [];
  for (let i = 0; i < numString.length; i += 2) {
    posList[i/2] = [parseInt(numString[i], 16), parseInt(numString[i+1], 16)];
  }

  const upperChar = [];
  const lowerChar = [];
  for (const pos of posList) {
    if ((pos[0] === 14 && pos[1] === 15) || pos[0] === 15) {
      upperChar.unshift(JP_CHAR_TABLE[14][0]);
      lowerChar.unshift(JP_CHAR_TABLE[pos[0] - 14][pos[1]]);
    } else if (pos[0] === 11 && pos[1] >= 7 && pos[1] <= 9) {
      upperChar.unshift(JP_CHAR_TABLE[pos[0]][0]);
      lowerChar.unshift(JP_CHAR_TABLE[0][pos[1]]);
    } else {
      upperChar.unshift(JP_CHAR_TABLE[pos[0]][pos[1]]);
      lowerChar.unshift(JP_CHAR_TABLE[0][0]);
    }
  }

  return {
    upper: upperChar.join(''),
    lower: lowerChar.join(''),
  }
}
